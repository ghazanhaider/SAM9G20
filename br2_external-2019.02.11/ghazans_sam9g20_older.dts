/*
 * ghazans_9g20.dts
 *
 * Licensed under GPLv2.
 */
/* /dts-v1/;
#include "at91sam9g20ek_common.dtsi"*/
#include "at91sam9g20ek_2mmc.dts"

/ {
        model = "Ghazans sam9g20";
        compatible = "atmel,at91sam9g20ek", "atmel,at91sam9g20", "atmel,at91sam9";

	chosen {
                bootargs = "console=ttyS0,115200 root=/dev/mtdblock5 rw ubi.mtd=5 root=ubi0:rootfs rootfstype=ubifs";
                stdout-path = "serial0:115200n8";
        };

        memory {
                reg = <0x20000000 0x2000000>;
        };

	ahb {
		apb {

			usart0: serial@fffb0000 {
                                pinctrl-0 = <&pinctrl_usart0>;
			};

			macb0: ethernet@fffc4000 {
				status = "disabled";
			};

			usb1: gadget@fffa4000 {
				/delete-property/ atmel,vbus-gpio;
			};

	/*		/delete-node/ mmc@fffa8000;  MMC0 slot0 is SDcard slot1 unused */

/*			mmc0: mmc@fffa8000 {
                                pinctrl-0 = <
                                        &pinctrl_board_mmc0_slot0
                                        &pinctrl_mmc0_clk
                                        &pinctrl_mmc0_slot0_cmd_dat0
                                        &pinctrl_mmc0_slot0_dat1_3>;
                                status = "okay";
                        } */


			spi0: spi@fffc8000 {
				cs-gpios = <&pioA 3 0>, <0>, <0>, <0>;
				status = "okay";
				mtd_dataflash@0 {
                                        compatible = "atmel,at45", "atmel,dataflash";
                                        spi-max-frequency = <50000000>;
                                        reg = <0>;
                                };
			};

			spi1: spi@fffcc000 { /* TODO: Need to add spi1 CS as a pin in pinctrl for this */
				cs-gpios = <&pioB 3 0>, <0>, <0>, <0>;
				status = "okay";

				spidev0: spi@0 {
					compatible = "spidev";
					reg = <0>;
					spi-max-frequency = <54000000>;
				};
			};
		};


		nand0: nand@40000000 {
			nand-bus-width = <0x10>;
                        nand-ecc-mode = "soft";
                        nand-on-flash-bbt;
                        status = "okay";

			/delete-node/ at91bootstrap@0;
			/delete-node/ barebox@20000;
			/delete-node/ bareboxenv@60000;
			/delete-node/ bareboxenv2@80000;
			/delete-node/ oftree@80000;
			/delete-node/ kernel@a0000;
			/delete-node/ rootfs@4a0000;
			/delete-node/ data@7ca0000;

			boot@0 { /* Actually empty, bootstrap is on AT45 */
                                label = "boot";
                                reg = <0x0 0x40000>;
                        };

			uboot@40000 {
                                label = "uboot";
                                reg = <0x40000 0x80000>;
                        };

                        env@c0000 {
                                label = "env";
                                reg = <0xc0000 0x40000>;
                        };

                        dtb@100000 {
                                label = "dtb";
                                reg = <0x100000 0x80000>;
                        };

                        kernel@200000 {
                                label = "kernel";
                                reg = <0x200000 0x600000>;
                        };

                        rootfs@800000 {
                                label = "rootfs";
                                reg = <0x800000 0xF800000>;
                        };
		};

		ebi: ebi@10000000 {
			nand_controller: nand-controller {
				nand@3 {
					nand-bus-width = <0x10>;
					partitions {
						boot@0 { /* Actually empty, bootstrap is on AT45 */
			                                label = "boot";
			                                reg = <0x0 0x40000>;
			                        };

			                        uboot@40000 {
			                                label = "uboot";
			                                reg = <0x40000 0x80000>;
			                        };

			                        env@c0000 {
			                                label = "env";
			                                reg = <0xc0000 0x40000>;
			                        };

			                        dtb@100000 {
                        			        label = "dtb";
			                                reg = <0x100000 0x80000>;
                        			};

			                        kernel@200000 {
                        			        label = "kernel";
			                                reg = <0x200000 0x600000>;
                        			};

			                        rootfs@800000 {
                        			        label = "rootfs";
			                                reg = <0x800000 0xF800000>;
                        			};
					};
				};
			};
		};

	};

	i2c@0 {
		/delete-node/ 24c512@50;
		/delete-node/ wm8731@1b;
	};

	/delete-node/ gpio_keys;
	/delete-node/ sound;

        leds {
                compatible = "gpio-leds";

                ds1 {
                        label = "ds1";
                        gpios = <&pioB 9 GPIO_ACTIVE_HIGH>;
                        linux,default-trigger = "heartbeat";
                };

		/delete-node/ ds5;

        };
};
